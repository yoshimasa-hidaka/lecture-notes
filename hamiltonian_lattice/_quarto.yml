project:
  type: book
  output-dir: ../docs/hamiltonian_lattice

book:
  title: "ハミルトニアン形式による格子QCD入門"
  author: ""
  downloads: [pdf]
  page-navigation: true
  sidebar:
    style: floating
    background: light
    search: true
    collapse-level: 2
    tools:
      - icon: github
        href: "https://github.com/yoshimasa-hidaka/lecture-notes"
        text: "View source"
      - icon: link
        href: "../index.html"
        text: "講義ノートへ戻る"
  chapters:
    - index.qmd                     # トップページ（本の概要）
    - part: "基礎編"
      chapters:
        - SU2.qmd
        - SUN.qmd
        - quantum_on_SUN.qmd
        - Kogut-Susskind.qmd
        - gauge_invariant_operators.qmd
        - regularization.qmd
        - Example.qmd
    - part: "発展編"
      chapters:
        #- stringnet.qmd
        - MTC.qmd
        - meanfield.qmd
        - fermion.qmd
        # - prepotential.qmd        # 必要ならアンコメント
    - part: "実装編"
#      chapters:
  appendices:
    - group_theory.qmd
    - q-deformation.qmd


crossref:
  chapters: true
  eq-prefix: ""
  fig-prefix: ""

language:
  crossref-ch-prefix: ""
  crossref-sec-prefix: ""

execute:
  cache: true
  freeze: auto

bibliography: references.bib
lang: en
reference-location: section 
# csl: nature.csl  # 好みのスタイルに変更可

format:
  html:
    theme: flatly
    css: style.css
    toc: true
    sidebar: true
    toc-location: right
    fig-format: svg
    number-sections: true
    number-depth: 3
    code-copy: true
    code-overflow: wrap
    highlight-style: github
    link-external-newwindow: true
    lightbox: auto
    include-in-header:
      - text: |
          <script>
          window.MathJax = {
            tex: {
              packages: {'[+]': ['ams','physics']},
              tags: 'ams',   // \label / \eqref を有効化
              macros: {
                bm: ["{\\boldsymbol{#1}}", 1],
                symbf: ["{\\boldsymbol{#1}}", 1],
                ri: "{\\mathrm{i}}",
                ER: "R",
                EL: "L",
                dag: "\\dagger",
                mathbbm: ["{\\mathbb{#1}}", 1],
                bbone: "\\unicode{x1D7D9}" // 𝟙
              }
            },
            chtml: { matchFontHeight: false },
            options: {
              skipHtmlTags: ["script","noscript","style","textarea","pre","code"],
              enableMenu: false
            }
          };
          </script>

  pdf:
    pdf-engine: lualatex
    documentclass: book
    classoption: ["oneside"]
    fig-format: pdf
    include-in-header:
      text: |
        % --- 日本語・数式まわり ---
        \usepackage{luatexja}
        \usepackage[ipaex]{luatexja-preset}
        \usepackage{amsmath,amssymb,mathtools,bm,bbm}
        \usepackage[italicdiff]{physics}
        \usepackage{unicode-math}
        \numberwithin{equation}{chapter}

        % --- 余白を小さく（必要に応じて調整）---
        \usepackage[margin=20mm,footskip=10mm]{geometry}

        % --- ヘッダ/フッタ（左右同じ）---
        \usepackage{fancyhdr}
        \setlength{\headheight}{15pt}
        \pagestyle{fancy}
        \fancyhf{} % 既定をクリア
        \fancyhead[C]{\nouppercase{\leftmark}} % 章タイトルを中央に
        \fancyfoot[C]{\thepage}                 % ページ番号を中央下
        \renewcommand{\headrulewidth}{0.4pt}
        \renewcommand{\footrulewidth}{0pt}

        % --- お好みのコマンド・定理環境 ---
        \newcommand{\ri}{\mathrm{i}}
        \newcommand{\ER}{R}
        \newcommand{\EL}{L}
        \newtheorem{example}{例}[chapter]
        \newtheorem{definition}{定義}[chapter]
        \newtheorem{theorem}{定理}[chapter]
        \newtheorem{question}{問}[chapter]